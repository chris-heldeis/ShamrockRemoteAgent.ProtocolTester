<Window x:Class="ShamrockRemoteAgent.MasterTester.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:ShamrockRemoteAgent.MasterTester.Views"
        Title="TCP Protocol Master Tester"
        Width="1200"
        Height="900"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource AppBackgroundBrush}"
        Loaded="OnMainWindowLoaded"
        Closing="OnMainWindowClosing">

    <!-- ========================= -->
    <!--  Resources (Theme-ready)  -->
    <!-- ========================= -->
    <Window.Resources>

        <!-- Colors -->
        <Color x:Key="LightBg">#F9FAFB</Color>
        <Color x:Key="DarkBg">#0F172A</Color>
        <Color x:Key="Primary">#3B82F6</Color>
        <Color x:Key="SidebarBg">#111827</Color>
        <Color x:Key="TextLight">#E5E7EB</Color>
        <Color x:Key="TextDark">#111827</Color>

        <!-- Brushes -->
        <SolidColorBrush x:Key="AppBackgroundBrush" Color="{DynamicResource DarkBg}" />
        <SolidColorBrush x:Key="HeaderBrush" Color="#020617" />
        <SolidColorBrush x:Key="SidebarBrush" Color="{DynamicResource SidebarBg}" />
        <SolidColorBrush x:Key="PrimaryBrush" Color="{DynamicResource Primary}" />
        <SolidColorBrush x:Key="TextBrush" Color="{DynamicResource TextLight}" />

        <!-- Text styles -->
        <Style x:Key="TitleText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{DynamicResource TextBrush}"/>
        </Style>

        <!-- Sidebar specific colors -->
        <Color x:Key="SidebarBgDark">#0B1220</Color>
        <Color x:Key="SidebarItemIdle">#0F172A</Color>
        <Color x:Key="SidebarItemHover">#1E293B</Color>
        <Color x:Key="SidebarItemSelected">#2563EB</Color>
        <Color x:Key="SidebarText">#CBD5E1</Color>

        <SolidColorBrush x:Key="SidebarBackgroundBrush" Color="{StaticResource SidebarBgDark}"/>
        <SolidColorBrush x:Key="SidebarTextBrush" Color="{StaticResource SidebarText}"/>
        <SolidColorBrush x:Key="SidebarItemIdleBrush"
                 Color="{StaticResource SidebarItemIdle}"/>
        <SolidColorBrush x:Key="SidebarItemHoverBrush"
                 Color="{StaticResource SidebarItemHover}"/>
        <SolidColorBrush x:Key="SidebarItemSelectedBrush"
                 Color="{StaticResource SidebarItemSelected}"/>

        <!-- Sidebar title -->
        <Style x:Key="SidebarSectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#94A3B8"/>
            <Setter Property="Margin" Value="12,8,12,12"/>
        </Style>

        <!-- Sidebar item -->
        <Style x:Key="SidebarItemStyle" TargetType="ListViewItem">
            <Setter Property="Height" Value="44"/>
            <Setter Property="Margin" Value="6,2"/>
            <Setter Property="Padding" Value="12,0"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Foreground" Value="{StaticResource SidebarTextBrush}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Background" Value="{StaticResource SidebarItemIdleBrush}"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <Border x:Name="Root"
                        CornerRadius="8"
                        Background="{TemplateBinding Background}">
                            <ContentPresenter VerticalAlignment="Center"/>
                        </Border>

                        <!-- Visual states -->
                        <ControlTemplate.Triggers>

                            <!-- Hover -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Root"
                                Property="Background"
                                Value="{StaticResource SidebarItemHoverBrush}"/>
                            </Trigger>

                            <!-- Selected -->
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Root"
                                Property="Background"
                                Value="{StaticResource SidebarItemSelectedBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>

                            <!-- Selected + Hover (keep selected color) -->
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsSelected" Value="True"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Root"
                                Property="Background"
                                Value="{StaticResource SidebarItemSelectedBrush}"/>
                            </MultiTrigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- ========================= -->
    <!--          Layout           -->
    <!-- ========================= -->
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="64"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ===== Header ===== -->
        <Border Grid.Row="0"
                Background="{DynamicResource HeaderBrush}"
                Padding="20"
                BorderBrush="#E5E7EB"
                BorderThickness="0,0,0,1">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Title -->
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <StackPanel Margin="12,0,0,0">
                        <TextBlock Text="RP1210 TCP Protocol Master Tester" Style="{StaticResource TitleText}"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ===== Body ===== -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240"/>
                <ColumnDefinition Width="680"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- ===== Sidebar ===== -->
            <Border Background="{StaticResource SidebarBackgroundBrush}"
        Padding="12">

                <StackPanel>

                    <TextBlock Text="Payloads"
                   Style="{StaticResource SidebarSectionTitle}"/>

                    <ListView x:Name="SidebarList"
                  ItemContainerStyle="{StaticResource SidebarItemStyle}"
                  Background="Transparent"
                  BorderThickness="0"
                  SelectionChanged="SidebarList_SelectionChanged">

                        <ListViewItem Tag="Ping">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="📡" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Ping"/>
                            </StackPanel>
                        </ListViewItem>

                        <ListViewItem Tag="Client Connect">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="🔌" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Client Connect"/>
                            </StackPanel>
                        </ListViewItem>

                        <ListViewItem Tag="Client Disconnect">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="❌" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Client Disconnect"/>
                            </StackPanel>
                        </ListViewItem>

                        <ListViewItem Tag="Send Message">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="✉️" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Send Message"/>
                            </StackPanel>
                        </ListViewItem>

                        <ListViewItem Tag="Read Message">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="✉️" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Read Message"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="Send Command">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="⚙️" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Send Command"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="ReadVersion">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="🏷️" FontSize="14" Margin="0 0 6 0"/>
                                <TextBlock Text="Read Version"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="GetErrorMsg">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="⚠️" FontSize="14" Margin="0 0 6 0"/>
                                <TextBlock Text="Get Error Msg"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="Get Hardware Status">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="🖥️" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Get Hardware Status"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="Get Last Error Msg">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="🧾" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Get Last Error Msg"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="Read Detailed Version">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="🏷️" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Read Detailed Version"/>
                            </StackPanel>
                        </ListViewItem>
                        <ListViewItem Tag="Close">
                            <StackPanel Orientation="Horizontal" Margin="12">
                                <TextBlock Text="🔒" FontSize="14" Margin="0 0 5 0"/>
                                <TextBlock Text="Close"/>
                            </StackPanel>
                        </ListViewItem>
                    </ListView>
                </StackPanel>
            </Border>

            <!-- Main Content -->
            <Border Grid.Column="1"
                    Background="{DynamicResource AppBackgroundBrush}"
                    Padding="24">

                <!-- Swap views here -->
                <ContentControl x:Name="MainContent">
                    <views:PingRequestView/>
                </ContentControl>

            </Border>
            <Border Grid.Column="2">
                <!-- Hex Viewer -->
                <views:HexViewerView Grid.Row="1"
                         Margin="16,8,16,16"/>
            </Border>
        </Grid>
    </Grid>
</Window>
